version: '3'

tasks:
  upkgs:
    aliases: ["user-packages"]
    desc: Install userspace packages
    cmds:
      - task: upkgs:brew
      - task: upkgs:pipx

  upkgs:brew:
    desc: Install homebrew packages
    cmds:
      - |
        brew install \
          chezmoi \
          poetry \
          ruff \
          ncspot

  upkgs:pipx:
    desc: Install pipx packages
    cmds:
      - |
        pipx install \
          organize-tool \
          git+https://github.com/enzet/map-machine \
          git+https://github.com/white-gecko/git-watchtower

  yarn:
    aliases: ["corepack"]
    desc: Enable yarn via corepack, and also install corepack since it is not available in the fedora packages
    cmds:
      - |
        echo "Setup user config path for npm â€¦"
        npm config set prefix '~/.local/'
        echo "Install corepack"
        npm install -g corepack
        echo "Now yarn should be available"
