version: '3'

tasks:
  user-tasks:
    desc: Create a user Taskfile for custom tasks.
    env:
      USER_TASK: "{{.HOME}}/.local/share/bluejay/Taskfile.yaml"
    cmds:
      - test ! -f "$USER_TASK" || (echo "The user Taskfile already exists at $USER_TASK". && exit 1)
      - mkdir -p "${USER_TASK%/*}" && touch "$USER_TASK"
      - "echo \"version: '3'\n\ntasks:\n  welcome:\n    desc: Your welcome task.\n    cmds:\n      - echo \\\"Hello bluejay\\\"\" > $USER_TASK"
      - echo "Your new Taskfile is at '$USER_TASK'"

  gpg:
    desc: Install the user GPG keys from your keepass
    cmds:
      - echo "TODO"

  p10k:
    aliases: ["powerlevel10k"]
    desc: Install powerlevel10k into the Oh-my-Zsh directory
    cmds:
      - git clone --depth=1 https://github.com/romkatv/powerlevel10k.git ${ZSH_CUSTOM:-$HOME/.oh-my-zsh/custom}/themes/powerlevel10k

  cups-pdf:
    desc: |
      Add the cups-pdf printer
      This might breakt at some time: https://github.com/OpenPrinting/cups-sharing/issues/4"
    cmds:
      - lpadmin -p Cups-PDF -D "Print to a PDF file" -v cups-pdf:/ -m CUPS-PDF_noopt.ppd -E
